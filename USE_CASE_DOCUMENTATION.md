# توثيق حالات الاستخدام - Use Case Documentation

تاريخ: 2026-01-01

## نظرة عامة

هذا المستند يوثق حالات الاستخدام لنظام إدارة مشاريع التخرج (GPMS) مع ترقيم موحد وأسماء متسقة.

## الأدوار (Actors)

1. **الطالب (Student)** - ST
2. **المشرف (Supervisor)** - SU
3. **لجنة المشاريع (Projects Committee)** - PC
4. **لجنة المناقشة (Discussion Committee)** - DC
5. **مدير النظام (System Admin)** - AD

---

## حالات الاستخدام حسب الدور

### الطالب (Student)

#### UC-ST-01: تقديم مقترح مشروع (Submit Proposal)
- **الوصف**: يقدم الطالب مقترح مشروع جديد خلال نافذة تقديم المقترحات
- **المتطلبات المسبقة**: نافذة `proposal_submission` نشطة
- **التدفق الأساسي**:
  1. الطالب يملأ نموذج المقترح
  2. النظام يتحقق من النافذة الزمنية
  3. النظام يحفظ المقترح بحالة `pending_review`
  4. النظام يرسل إشعار للجنة المشاريع
- **النتيجة**: مقترح جديد بحالة قيد المراجعة

#### UC-ST-02: تصفح المشاريع المتاحة (Browse Available Projects)
- **الوصف**: يطالع الطالب المشاريع المعتمدة والمعلنة
- **المتطلبات المسبقة**: المشروع بحالة `available_for_registration` أو أعلى
- **التدفق الأساسي**:
  1. الطالب يطلب قائمة المشاريع
  2. النظام يعرض فقط المشاريع المعلنة
- **النتيجة**: قائمة بالمشاريع المتاحة

#### UC-ST-03: تقديم طلب تسجيل في مشروع (Submit Registration Request)
- **الوصف**: يقدم الطالب طلب تسجيل في مشروع متاح
- **المتطلبات المسبقة**: 
  - نافذة `project_registration` نشطة
  - المشروع بحالة `available_for_registration`
- **التدفق الأساسي**:
  1. الطالب يختار مشروع
  2. النظام يتحقق من النافذة الزمنية
  3. النظام ينشئ `ProjectRegistration` بحالة `pending`
  4. النظام يرسل إشعار للجنة المشاريع
- **النتيجة**: طلب تسجيل قيد المراجعة

#### UC-ST-04: إدارة المجموعة الطلابية (Manage Student Group)
- **الوصف**: يدير الطالب مجموعته بعد الموافقة على تسجيله
- **المتطلبات المسبقة**: 
  - الطالب لديه تسجيل معتمد (`approved`)
  - الطالب مرتبط بالمشروع في `project_student`
- **التدفق الأساسي**:
  1. الطالب ينشئ مجموعة أو يدعو أعضاء
  2. النظام يتحقق من التسجيل المعتمد
  3. النظام ينفذ العملية
- **النتيجة**: مجموعة محدثة

#### UC-ST-05: تقديم طلب تغيير (Submit Change Request)
- **الوصف**: يقدم الطالب طلب تغيير (مشرف، مجموعة، مشروع)
- **التدفق الأساسي**:
  1. الطالب يملأ نموذج الطلب
  2. النظام ينشئ `ProjectRequest` بحالة `pending`
  3. النظام يرسل إشعار للمشرف
- **النتيجة**: طلب تغيير قيد المراجعة

#### UC-ST-06: تسليم الوثائق (Submit Documents)
- **الوصف**: يرفع الطالب وثائق وتقارير المشروع
- **المتطلبات المسبقة**: الطالب مسجل في المشروع
- **النتيجة**: وثيقة مرفوعة

#### UC-ST-07: متابعة المشروع (Follow Up Project)
- **الوصف**: يتابع الطالب ملاحظات المشرف والمراحل والاجتماعات
- **المتطلبات المسبقة**: الطالب مسجل في المشروع
- **النتيجة**: عرض معلومات المشروع

#### UC-ST-08: استعراض الدرجات (View Grades)
- **الوصف**: يعرض الطالب درجاته النهائية بعد اعتمادها
- **المتطلبات المسبقة**: الدرجة معتمدة (`is_approved = true`)
- **النتيجة**: عرض الدرجات

---

### المشرف (Supervisor)

#### UC-SU-01: تقديم مقترح مشروع (Submit Proposal)
- **الوصف**: يقدم المشرف مقترح مشروع جديد
- **المتطلبات المسبقة**: نافذة `proposal_submission` نشطة
- **النتيجة**: مقترح جديد

#### UC-SU-02: استعراض المشاريع المسندة (Browse Assigned Projects)
- **الوصف**: يعرض المشرف المشاريع المسندة إليه
- **النتيجة**: قائمة المشاريع

#### UC-SU-03: معالجة طلب إشراف (Process Supervision Request)
- **الوصف**: يقبل أو يرفض المشرف طلب إشراف
- **التدفق الأساسي**:
  1. المشرف يراجع الطلب
  2. المشرف يختار قبول أو رفض
  3. النظام يحدث حالة الطلب
- **النتيجة**: طلب معالج

#### UC-SU-04: إدارة مراحل المشروع (Manage Project Milestones)
- **الوصف**: ينشئ ويدير المشرف مراحل المشروع
- **النتيجة**: مراحل محدثة

#### UC-SU-05: جدولة الاجتماعات (Schedule Meetings)
- **الوصف**: يجدول المشرف اجتماعات مع الطلاب
- **النتيجة**: اجتماعات مجدولة

#### UC-SU-06: كتابة ملاحظات (Write Notes)
- **الوصف**: يكتب المشرف ملاحظات للطلاب
- **النتيجة**: ملاحظات مضافة

#### UC-SU-07: تقييم المشروع (Evaluate Project)
- **الوصف**: يسجل المشرف درجات الإشراف
- **المتطلبات المسبقة**: نافذة `supervisor_evaluation` نشطة
- **النتيجة**: درجات مسجلة

---

### لجنة المشاريع (Projects Committee)

#### UC-PC-01: إدارة النوافذ الزمنية (Manage Time Windows)
- **الوصف**: تنشئ وتحدث لجنة المشاريع النوافذ الزمنية
- **النتيجة**: نوافذ زمنية محدثة

#### UC-PC-02: مراجعة المقترحات (Review Proposals)
- **الوصف**: تراجع لجنة المشاريع المقترحات المقدمة
- **التدفق الأساسي**:
  1. اللجنة تعرض المقترحات بحالة `pending_review`
  2. اللجنة تراجع المقترح
  3. اللجنة تتخذ قرار (اعتماد/رفض/طلب تعديل)

#### UC-PC-03: اعتماد مقترح (Approve Proposal)
- **الوصف**: تعتمد لجنة المشاريع مقترح وتنشئ مشروع
- **التدفق الأساسي**:
  1. اللجنة تعتمد المقترح
  2. النظام ينشئ `Project` بحالة `draft`
  3. النظام يربط المقترح بالمشروع
  4. النظام يرسل إشعار للصاحب
- **النتيجة**: مشروع جديد بحالة `draft`

#### UC-PC-04: رفض مقترح (Reject Proposal)
- **الوصف**: ترفض لجنة المشاريع مقترح
- **التدفق الأساسي**:
  1. اللجنة ترفض المقترح
  2. النظام يحدث حالة المقترح إلى `rejected`
  3. النظام يرسل إشعار للصاحب
- **النتيجة**: مقترح مرفوض

#### UC-PC-05: طلب تعديل مقترح (Request Proposal Modification)
- **الوصف**: تطلب لجنة المشاريع تعديلات على مقترح
- **التدفق الأساسي**:
  1. اللجنة تطلب تعديلات
  2. النظام يحدث حالة المقترح إلى `requires_modification`
  3. النظام يرسل إشعار للصاحب
- **النتيجة**: مقترح يتطلب تعديلات

#### UC-PC-06: نشر المشاريع (Publish Projects)
- **الوصف**: تنشر لجنة المشاريع المشاريع المعتمدة للطلاب
- **التدفق الأساسي**:
  1. اللجنة تختار مشاريع بحالة `draft`
  2. النظام يحدث حالة المشاريع إلى `available_for_registration`
  3. النظام يرسل إشعار لجميع الطلاب
- **النتيجة**: مشاريع متاحة للتسجيل

#### UC-PC-07: تعيين المشرفين (Assign Supervisors)
- **الوصف**: تعين لجنة المشاريع مشرفين للمشاريع
- **النتيجة**: مشرفون معينون

#### UC-PC-08: مراجعة طلبات التسجيل (Review Registration Requests)
- **الوصف**: تراجع لجنة المشاريع طلبات التسجيل المقدمة
- **التدفق الأساسي**:
  1. اللجنة تعرض طلبات التسجيل بحالة `pending`
  2. اللجنة تراجع الطلب

#### UC-PC-09: اعتماد طلب تسجيل (Approve Registration Request)
- **الوصف**: تعتمد لجنة المشاريع طلب تسجيل طالب
- **التدفق الأساسي**:
  1. اللجنة تعتمد الطلب
  2. النظام يحدث حالة التسجيل إلى `approved`
  3. النظام يربط الطالب بالمشروع في `project_student`
  4. النظام يزيد `current_students`
  5. النظام يرسل إشعار للطالب
- **النتيجة**: طالب مسجل رسمياً

#### UC-PC-10: رفض طلب تسجيل (Reject Registration Request)
- **الوصف**: ترفض لجنة المشاريع طلب تسجيل طالب
- **التدفق الأساسي**:
  1. اللجنة ترفض الطلب
  2. النظام يحدث حالة التسجيل إلى `rejected`
  3. النظام يرسل إشعار للطالب
- **النتيجة**: طلب مرفوض

#### UC-PC-11: معالجة طلبات التغيير (Process Change Requests)
- **الوصف**: تعالج لجنة المشاريع طلبات التغيير المعتمدة من المشرف
- **النتيجة**: طلبات معالجة

#### UC-PC-12: توزيع لجان المناقشة (Distribute Discussion Committees)
- **الوصف**: توزع لجنة المشاريع أعضاء لجان المناقشة على المشاريع
- **النتيجة**: لجان مناقشة موزعة

#### UC-PC-13: اعتماد الدرجات النهائية (Approve Final Grades)
- **الوصف**: تعتمد لجنة المشاريع الدرجات النهائية
- **المتطلبات المسبقة**: نافذة `grade_approval` نشطة
- **النتيجة**: درجات معتمدة

#### UC-PC-14: إصدار التقارير (Generate Reports)
- **الوصف**: تصدر لجنة المشاريع تقارير إحصائية
- **النتيجة**: تقارير

---

### لجنة المناقشة (Discussion Committee)

#### UC-DC-01: استعراض المشاريع المسندة (Browse Assigned Projects)
- **الوصف**: تعرض لجنة المناقشة المشاريع المسندة إليها
- **النتيجة**: قائمة المشاريع

#### UC-DC-02: تقييم المشروع (Evaluate Project)
- **الوصف**: تسجل لجنة المناقشة درجات المناقشة
- **المتطلبات المسبقة**: نافذة `discussion_evaluation` نشطة
- **النتيجة**: درجات مسجلة

---

### مدير النظام (System Admin)

#### UC-AD-01: إدارة المستخدمين (Manage Users)
- **الوصف**: يدير مدير النظام حسابات المستخدمين
- **النتيجة**: مستخدمون محدثون

#### UC-AD-02: إصدار التقارير (Generate Reports)
- **الوصف**: يصدر مدير النظام تقارير النظام
- **النتيجة**: تقارير

---

## تدفقات العمل الرئيسية

### تدفق المقترح → مشروع

```
UC-ST-01 (تقديم مقترح)
  ↓
UC-PC-02 (مراجعة المقترحات)
  ↓
UC-PC-03 (اعتماد مقترح) → Project.status = draft
  ↓
UC-PC-07 (تعيين المشرفين)
  ↓
UC-PC-06 (نشر المشاريع) → Project.status = available_for_registration
```

### تدفق التسجيل في مشروع

```
UC-ST-03 (تقديم طلب تسجيل)
  ↓
UC-PC-08 (مراجعة طلبات التسجيل)
  ↓
UC-PC-09 (اعتماد طلب تسجيل) → Student attached to project
  ↓
UC-ST-04 (إدارة المجموعة) [ممكن فقط بعد الاعتماد]
```

### تدفق التقييم

```
UC-SU-07 (تقييم المشرف) [supervisor_evaluation window]
  ↓
UC-DC-02 (تقييم لجنة المناقشة) [discussion_evaluation window]
  ↓
UC-PC-13 (اعتماد الدرجات النهائية) [grade_approval window]
  ↓
UC-ST-08 (استعراض الدرجات)
```

---

## ملاحظات مهمة

1. **النوافذ الزمنية**: معظم العمليات تتطلب نوافذ زمنية نشطة (ماعدا لجنة المشاريع)
2. **الاعتماد**: التسجيل في المشروع يتطلب اعتماد لجنة المشاريع قبل إدارة المجموعة
3. **الرؤية**: الطلاب يمكنهم رؤية المشاريع فقط إذا كانت معلنة أو مسجلين فيها
4. **التسلسل**: يجب اتباع التسلسل الصحيح للحالات (مثلاً: draft → available_for_registration → in_progress)
